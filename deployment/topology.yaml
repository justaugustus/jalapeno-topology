---
apiVersion: v1
kind: Deployment
metadata:
  name: topology
  namespace: jalapeno
---
apiVersion: apps/v1
kind: Deployment
spec:
  replicas: 1
  selector:
    matchLabels:
      app: topology
  template:
    metadata:
      labels:
        app: topology
    spec:
      containers:
        - args:
          - '--v'
          - '6'
          - '--message-server'
          - 'broker.jalapeno:9092'
          - '--database-server'
          - 'http://arangodb.jalapeno:8529'
          - '--database-name'
          - jalapeno
          - '--database-user'
          - root
          - '--database-pass'
          - jalapeno
          image: docker.io/sbezverk/topology:wip
          imagePullPolicy: Always
          name: topology
          ports:
            - containerPort: 56769
              protocol: TCP
              name: stats
            - containerPort: 56768
              protocol: TCP
              name: perf
metadata:
  name: topology
  namespace: jalapeno
